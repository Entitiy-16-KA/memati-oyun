<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Memati Oyunu | Entitiy 16 KA</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
        }

        #gameCanvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-image: url('https://d.yeniduzen.com/news/108568.jpg');
            background-size: cover;
            border: 2px solid #000;
        }

        .character {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: auto;
        }

        .enemy {
            position: absolute;
            width: 60px;
            height: auto;
        }

        .bullet {
            position: absolute;
            width: 10px;
            height: auto;
        }

        .controls {
            position: absolute;
            bottom: 20px;
            right: 20px;
        }

        button {
            width: 40px;
            height: 40px;
            font-size: 20px;
            margin: 5px;
        }

    </style>
</head>
<body>
    <div id="gameCanvas">
        <div class="controls">
            <button id="leftBtn">←</button>
            <button id="rightBtn">→</button>
            <button id="upBtn">↑</button>
            <button id="downBtn">↓</button>
        </div>
    </div>
    <script>
        const canvas = document.getElementById('gameCanvas');
        const characterImg = 'https://upload.wikimedia.org/wikipedia/tr/8/83/Memati_Kurtlar_vadisi_pusu.jpg';
        const enemyImg = 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSXua5duGB_MRTcVcTbhuLYzg3yNZKDUMeCLA&s';
        const bulletImg = 'https://r.resimlink.com/tWDm20rB.png';

        let enemies = [];
        let bullets = [];
        let score = 0;
        let character;
        let isMoving = {
            left: false,
            right: false,
            up: false,
            down: false,
        };

        // Karakter oluşturma
        function createCharacter() {
            character = document.createElement('div');
            character.className = 'character';
            character.style.position = 'absolute';
            character.style.bottom = '20px';
            character.style.left = '50%';
            character.style.transform = 'translateX(-50%)';
            
            const characterImage = document.createElement('img');
            characterImage.src = characterImg;
            characterImage.style.width = '100%';
            characterImage.style.height = 'auto';
            
            character.appendChild(characterImage);
            canvas.appendChild(character);
        }

        // Düşman oluşturma
        function createEnemy() {
            const enemy = document.createElement('img');
            enemy.src = enemyImg;
            enemy.className = 'enemy';
            enemy.style.top = Math.random() * (canvas.clientHeight - 100) + 'px';
            enemy.style.left = '0px';
            canvas.appendChild(enemy);
            enemies.push(enemy);
            shootBullet(enemy);
        }

        // Mermi oluşturma
        function shootBullet(enemy) {
            const x = parseFloat(enemy.style.left) + 20;
            const y = parseFloat(enemy.style.top) + (enemy.offsetHeight / 2) - 5;
            const bullet = document.createElement('img');
            bullet.src = bulletImg;
            bullet.className = 'bullet';
            bullet.style.position = 'absolute';
            bullet.style.top = y + 'px';
            bullet.style.left = x + 'px';
            canvas.appendChild(bullet);
            bullets.push(bullet);
        }

        // Mermileri hareket ettirme
        function moveBullets() {
            bullets.forEach((bullet, index) => {
                const bulletLeft = parseFloat(bullet.style.left);
                bullet.style.left = bulletLeft + 5 + 'px';

                if (isColliding(bullet, character)) {
                    alert("Oyun bitti! Memati mermiden kaçamadı.");
                    resetGame();
                }

                if (bulletLeft > canvas.clientWidth) {
                    bullet.remove();
                    bullets.splice(index, 1);
                }
            });
        }

        // Çarpışma kontrolü
        function isColliding(bullet, character) {
            const bulletRect = bullet.getBoundingClientRect();
            const characterRect = character.getBoundingClientRect();
            return !(bulletRect.right < characterRect.left || 
                     bulletRect.left > characterRect.right || 
                     bulletRect.bottom < characterRect.top || 
                     bulletRect.top > characterRect.bottom);
        }

        // Karakteri hareket ettirme
        function moveCharacter() {
            const characterLeft = parseFloat(character.style.left);
            const characterBottom = parseFloat(character.style.bottom);

            if (isMoving.left && characterLeft > 0) character.style.left = (characterLeft - 5) + 'px';
            if (isMoving.right && characterLeft < (canvas.clientWidth - character.offsetWidth)) character.style.left = (characterLeft + 5) + 'px';
            if (isMoving.up && characterBottom < (canvas.clientHeight - character.offsetHeight)) character.style.bottom = (characterBottom + 5) + 'px';
            if (isMoving.down && characterBottom > 0) character.style.bottom = (characterBottom - 5) + 'px';
        }

        // Oyun döngüsü
        function gameLoop() {
            moveBullets();
            moveCharacter();
            requestAnimationFrame(gameLoop);
        }

        // Oyunu sıfırlama
        function resetGame() {
            bullets.forEach(bullet => bullet.remove());
            enemies.forEach(enemy => enemy.remove());
            bullets = [];
            enemies = [];
            score = 0;

            if (character) {
                character.remove();
            }
            
            alert("Oyun yeniden başlıyor!");
            createCharacter();
            setInterval(createEnemy, 2000);
            gameLoop();
        }

        // Klavye ile hareket
        window.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowLeft') isMoving.left = true;
            if (e.key === 'ArrowRight') isMoving.right = true;
            if (e.key === 'ArrowUp') isMoving.up = true;
            if (e.key === 'ArrowDown') isMoving.down = true;
        });

        window.addEventListener('keyup', (e) => {
            if (e.key === 'ArrowLeft') isMoving.left = false;
            if (e.key === 'ArrowRight') isMoving.right = false;
            if (e.key === 'ArrowUp') isMoving.up = false;
            if (e.key === 'ArrowDown') isMoving.down = false;
        });

        // Ok tuşları için buton olayları
        document.getElementById('leftBtn').addEventListener('mousedown', () => {
            isMoving.left = true;
        });
        document.getElementById('leftBtn').addEventListener('mouseup', () => {
            isMoving.left = false;
        });

        document.getElementById('rightBtn').addEventListener('mousedown', () => {
            isMoving.right = true;
        });
        document.getElementById('rightBtn').addEventListener('mouseup', () => {
            isMoving.right = false;
        });

        document.getElementById('upBtn').addEventListener('mousedown', () => {
            isMoving.up = true;
        });
        document.getElementById('upBtn').addEventListener('mouseup', () => {
            isMoving.up = false;
        });

        document.getElementById('downBtn').addEventListener('mousedown', () => {
            isMoving.down = true;
        });
        document.getElementById('downBtn').addEventListener('mouseup', () => {
            isMoving.down = false;
        });

        setInterval(createEnemy, 2000);
        createCharacter();
        gameLoop();

    </script>
</body>
</html>
